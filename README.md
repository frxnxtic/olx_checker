# Відстежувач цін оголошень OLX

## Огляд

"Відстежувач цін оголошень OLX" — це сервіс, розроблений на основі Laravel, що дозволяє користувачам підписуватись на зміни цін в оголошеннях на OLX. Користувачі можуть надіслати посилання на оголошення OLX разом із своєю електронною поштою, і сервіс періодично перевірятиме, чи змінилася ціна. Якщо ціна змінюється, користувач отримує електронне сповіщення.

## Функціональні можливості

- Підписка на відстеження змін ціни будь-якого оголошення OLX.
- Періодична перевірка зміни ціни за допомогою системи планувальника завдань Laravel.
- Надсилання сповіщень на електронну пошту при зміні ціни.
- Підтримка декількох підписок на одне оголошення.
- Оптимізоване відстеження для уникнення дублювання запитів.

## Вимоги

- PHP >= 7.4
- Composer
- Laravel 8 або 9
- MySQL або інша підтримувана база даних
- Поштовий сервер або сервіс для тестування (наприклад, Mailtrap)

## Встановлення

1. Клонуйте репозиторій:
 ```bash
 git clone https://github.com/your-username/olx-price-tracker.git
 cd olx-price-tracker
 ```
2. Встановіть залежності за допомогою Composer:
```bash
composer install
```
3. Створіть файл .env на основі .env.example:
```bash
cp .env.example .env
```
4. Налаштуйте підключення до бази даних у файлі .env:
```makefile
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=your_database
DB_USERNAME=your_username
DB_PASSWORD=your_password
```

5. Застосуйте міграції для створення таблиць у базі даних:
```bash
php artisan migrate
```
6. Налаштуйте поштовий сервіс для відправки сповіщень (наприклад, використовуйте Mailtrap для тестування):
```makefile
MAIL_MAILER=smtp
MAIL_HOST=smtp.mailtrap.io
MAIL_PORT=2525
MAIL_USERNAME=your_mailtrap_username
MAIL_PASSWORD=your_mailtrap_password
MAIL_ENCRYPTION=null
MAIL_FROM_ADDRESS=no-reply@olx-tracker.com
MAIL_FROM_NAME="OLX Tracker"
```
7. Запустіть генерацію ключа додатку:
```bash
php artisan key:generate
```

8. Запустіть локальний сервер:
```bash
php artisan serve
```

## Використання
1. Підписка на відстеження ціни

Відправте POST-запит на маршрут /subscribe зі своїм email і посиланням на оголошення OLX.

Приклад запиту:
```bash
POST /subscribe
```

Параметри:
- ad_url: Посилання на оголошення OLX.
- email: Електронна пошта, на яку будуть надсилатися сповіщення.
  
2. Перевірка змін ціни
   
Система періодично перевіряє ціни в оголошеннях за допомогою планувальника Laravel. Щоб запустити планувальник локально, використовуйте наступну команду:
```bash
php artisan schedule:run
```

3. Відправка електронної пошти
   
Якщо ціна змінюється, на вказану електронну пошту буде надіслано повідомлення зі старою та новою ціною.

## Тестування
### Юніт-тести
Для запуску тестів використовуйте команду:

```bash
php artisan test
```
### Запуск планувальника за допомогою Cron
Для автоматичного запуску перевірки цін додайте наступне завдання до cron:

```bash
* * * * * cd /path-to-your-project && php artisan schedule:run >> /dev/null 2>&1
```
Це забезпечить періодичну перевірку цін оголошень кожну хвилину.

Ліцензія
Цей проєкт ліцензований на умовах ліцензії MIT. Подробиці дивіться у файлі LICENSE.
